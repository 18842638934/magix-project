define("app/services/service",["magix","$"],function(e,t,n){var r=e("magix"),i=e("$"),s=r.Service.extend(function(e,t){i.ajax({url:e.get("url")+"?r="+r.guid(),complete:function(n,r){"error"==r?t({msg:n.statusText}):(e.set("data",i.parseJSON(n.responseText)),t())}})});s.add([{name:"list",url:"./tmpl/apis/list.json",cache:6e5},{name:"list1",url:"./tmpl/apis/list1.json",cache:6e5},{name:"list404",url:"./tmpl/apis/list404.json"},{name:"code",url:"./tmpl/apis/code.json",cache:6e5}]),r.mix(s,{ctor:function(){var e=this;e.on("rendercall",function(){delete e.$locker})},request:function(e){e=e||r.guid("r");var t=new s;return this.capture(e,t,!0),t},fetch:function(e,t){this.request().all(e,t)},save:function(e,t){var n=this,r=JSON.stringify(e);n.lock(r,function(){n.request(r+"_request").save(e,function(){n.unlock(r),t.apply(n,arguments)})})},lock:function(e,t){var n=this;n.$locker||(n.$locker={});var r=n.$locker;r[e]||(r[e]=t,t())},unlock:function(e){var t=this.$locker;t&&delete t[e]}}),n.exports=s});