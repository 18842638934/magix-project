define("app/services/preservice",["magix"],function(e,n,i){var t=e("magix"),r=t.Service.extend(function(e,n){});t.mix(r,{serviceList:[],taskList:[],Actions:{login:function(e){setTimeout(e,1e4)},vcode:function(e){setTimeout(e,1e3)}},addService:function(e,n,i){r.serviceList.push({sync:e,bag:n,callback:i})},addTask:function(e){var n=r.taskList;1!=n[e]&&(n[e]=1,n.push(e),r.runTask())},runService:function(){var e=r.serviceList.shift();e&&(e.sync(e.bag,e.callback),r.runService())},runTask:function(){if(!r.$run){r.$run=!0;var e=r.taskList,n=e.shift();if(n){var i=r.Actions[n];i?i(function(){delete e[n],delete r.$run,r.runTask()}):(delete e[n],delete r.$run,r.runTask())}else delete r.$run,r.runService()}},intervene:function(){return r.$run}}),i.exports=r});