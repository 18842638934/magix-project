define("app/mixins/checkbox-linkage",["$","magix"],function(n,e,a){var i=n("$"),t=n("magix"),c=function(n){n=i(n);var e=n.find("input[linkage-parent-name]"),a={};return e.each(function(n,e){var t=i(e).attr("linkage-parent-name");a[t]=1}),n.find("input[linkage-name]").each(function(n,e){var t=i(e).attr("linkage-name");a[t]=1}),t.keys(a)},r=function(n,e,a){var i=n.find("input[linkage-name="+a+"]"),t=n.find("input[linkage-parent-name="+a+"]"),c=!1,r=!1,u=i[0]==e,o=e&&e.checked;t.each(function(n,e){u&&(e.checked=o),e.checked?c=!0:r=!0}),i.prop("indeterminate",!1),c&&!r?i.prop("checked",!0):r&&!c?i.prop("checked",!1):c&&i.prop("indeterminate",!0)},u=function(n,e){n=i(n);var a=c(n);if(a.length)for(var t=0;t<a.length;t++){var u=a[t];r(n,e,u)}};a.exports={ctor:function(){var n,e=this;e.on("rendered",function(){clearTimeout(n),n=setTimeout(e.wrapAsync(function(){u("#"+e.id)}),0)})},getSelectedIds:function(n){var e=[];return i("#"+this.id+" input:checked").each(function(a,t){var c=t.value,r=i(t),u=r.attr("linkage-parent-name");u&&c&&(!n||n&&n==u)&&e.push(t.value)}),e},"$input[linkage-parent-name]<change>":function(n){u("#"+this.id,n.eventTarget)},"$input[linkage-name]<change>":function(n){u("#"+this.id,n.eventTarget)}}});