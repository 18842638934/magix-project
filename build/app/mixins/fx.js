define("app/mixins/fx",["magix"],function(t,n,r){var i=t("magix"),e={},o=function(t){var n=this;n.$i=t,n.$q=[]};i.mix(o.prototype,{run:function(){var t=this;t.$t||(t.$t=setInterval(function(){for(var n=t.$q,r=0,e=void 0;r<n.length;r++)e=n[r],e.r?n.splice(r--,1):i.toTry(e.f);n.length||(clearInterval(t.$t),delete t.$t)},t.$i))},add:function(t){var n=this;n.$q.push({f:t}),n.run()},remove:function(t){for(var n=this,r=n.$q,i=void 0,e=0;e<r.length;e++)if(i=r[e],!i.r&&i.f==t){i.r=1;break}}}),o.get=function(t){var n=e[t];return n||(n=new o(t),e[t]=n),n};var $=function(t){return t},f=i.Base.extend({ctor:function(t,n){var r=this;r.$alg&&!t||(t=t||$,r.$alg=function(n,i){return n+(i-n)*t(r.$current/r.$duration)}),r.$timer=o.get(n||13),r.$q=[]},run:function(t,n){var r=this;r.$die||(r.$q.push({time:t,f:n}),r.$tfn||r.work())},work:function(){var t=this,n=t.$q.shift();n?(t.$duration=n.time,t.$f=n.f,t.$now=Date.now(),t.$tfn||(t.$tfn=function(n){t.$current=Date.now()-t.$now,t.$current>t.$duration&&(n=t.$current=t.$duration);try{t.$f(t.$alg)}catch(t){n=t}n&&t.work()},t.$timer.add(t.$tfn))):t.stop()},stop:function(){var t=this;t.$tfn&&(t.$timer.remove(t.$tfn),delete t.$tfn,t.fire("stop"))},destroy:function(){var t=this;t.stop(),t.$q=[],t.$die=1}});r.exports={getFX:function(){var t=new f;return this.capture(i.guid("fx_"),t,!0),t}}});