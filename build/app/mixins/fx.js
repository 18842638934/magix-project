define("app/mixins/fx",["magix"],function(t,n,i){var r=t("magix"),e=window.requestAnimationFrame||function(t){return setTimeout(t,16)},o=window.cancelAnimationFrame||clearTimeout,f=Date.now||function(){return(new Date).getTime()},$={$q:[],add:function(t,n){var i=this;i.$q.push({i:t||15,f:n,n:f()}),i.work()},remove:function(t){for(var n=this,i=n.$q,r=void 0,e=0;e<i.length;e++)if(r=i[e],!r.r&&r.f==t){r.r=1;break}},work:function(){var t=this;if(!t.$t){var n=function(){for(var i=t.$q,$=0,a=void 0,u=void 0;$<i.length;$++)a=i[$],a.r?i.splice($--,1):(u=f())-a.n>=a.i&&(a.n=u,r.toTry(a.f));i.length?t.$t=e(n):(o(t.$t),delete t.$t)};t.$t=e(n)}}},a=function(t){return t},u=r.Base.extend({ctor:function(t,n){var i=this;i.$alg&&!n||(n=n||a,i.$alg=function(t,r){return t+(r-t)*n(i.$current/i.$duration)}),i.$q=[],i.$i=t},run:function(t,n){var i=this;i.$die||(i.$q.push({time:t,f:n}),i.$tfn||i.work())},work:function(){var t=this,n=t.$q.shift();n?(t.$duration=n.time,t.$f=n.f,t.$now=f(),t.$tfn||(t.$tfn=function(n){t.$current=Date.now()-t.$now,t.$current>t.$duration&&(n=t.$current=t.$duration);try{t.$f(t.$alg)}catch(t){n=t}n&&t.work()},$.add(t.$i,t.$tfn))):t.stop()},stop:function(){var t=this;t.$tfn&&($.remove(t.$tfn),delete t.$tfn,t.fire("stop"))},destroy:function(){var t=this;t.stop(),t.$q=[],t.$die=1}});i.exports={getFX:function(){var t=new u;return this.capture(r.guid("fx_"),t,!0),t}}});