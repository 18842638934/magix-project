define("app/mixins/store",["magix"],function(t,n,e){var i=t("magix"),r=[].slice,a={extend:function(t){var n={},e={},a=function(t){i.mix(e,t);var r=n;for(var a in r){var u=r[a],s=u.updater;s&&s.digest(t)}},u=i.Base.extend({ctor:function(t){this.updater=t},dispatch:function(t){var n=u[t],e="load"==t,i=this;if(n)if(e&&u.$lp)u.$lp.then(function(){i.digest()});else{var s=n.apply(u,r.call(arguments,1));s&&s.then(function(t){a(t)}),e&&(u.$lp=s)}},get:function(t){return this.updater.get(t)},set:function(t){return this.updater.set(t),this},digest:function(t){return this.updater.digest(t),this}},i.mix({get:function(t){var n=e;return t&&(n=n[t]),n}},t));return{ctor:function(){var t=this;t.store=new u(t.updater);var i=n;i[t.id]=t,t.updater.set(e),t.on("destroy",function(){delete i[t.id]})},dispatch:function(t){var n,e=u[t];return e&&(n=e.apply(u,r.call(arguments,1)))&&n.then(function(t){a(t)}),n}}}};e.exports=a});