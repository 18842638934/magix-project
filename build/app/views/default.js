define("app/menu",function(e,i,t){var s=[[-1,"/index","首页"]],a=[{text:"常用组件",icon:"&#xe695;",subs:[{text:"基础组件",canFolder:!0,subs:[{text:"弹出框",icon:"&#xe600;",url:"/coms/dialog"},{text:"验证组件",icon:"&#xe65d;",url:"/coms/validation"},{text:"下拉框组件",icon:"&#xe663;",url:"/coms/dropdown"},{text:"分页组件",icon:"&#xe624;",url:"/coms/pagination"},{text:"popover",icon:"&#xe609;",url:"/coms/popover"},{text:"日历组件",icon:"&#xe688;",url:"/coms/calendar"}]},{text:"其它组件",canFolder:!0,subs:[{text:"全局提示",icon:"&#xe660;",url:"/coms/gtip"},{text:"小时选择",icon:"&#xe62f;",url:"/coms/hourpicker"},{text:"复制组件",icon:"&#xe607;",url:"/coms/copy"},{text:"taginput",icon:"&#xe60a;",url:"/coms/taginput"},{text:"上传组件",icon:"&#xe62f;",url:"/coms/uploader"},{text:"范围组件",icon:"&#xe607;",url:"/coms/range"},{text:"tree",icon:"&#xe60a;",url:"/coms/tree"},{text:"颜色选择",icon:"&#xe62f;",url:"/coms/colorpicker"},{text:"popmenu",icon:"&#xe607;",url:"/coms/popmenu"},{text:"inputmask",icon:"&#xe63a;",url:"/coms/inputmask"}]}]},{text:"Mixins",icon:"&#xe667;",subs:[{text:"mixins的介绍",icon:"&#xe626;",url:"/mixins/intro"},{text:"加载loading",icon:"&#xe688;",url:"/mixins/loading"},{text:"checkbox联动",icon:"&#xe628;",url:"/mixins/checkbox"},{text:"checkbox保存状态",icon:"&#xe628;",url:"/mixins/checkbox-storestate"},{text:"大屏展示",icon:"&#xe688;",url:"/mixins/large-img"},{text:"图表",icon:"&#xe632;",url:"/mixins/chart"},{text:"节点震动",icon:"&#xe62a;",url:"/mixins/shake"},{text:"基础动效",icon:"&#xe627;",url:"/mixins/fx"}]},{text:"常见页面",icon:"&#xe691;",subs:[{text:"列表页面",icon:"&#xe667;",url:"/pages/list"},{text:"表单页面",icon:"&#xe617;",url:"/pages/form"}]},{text:"其它特性",icon:"&#xe648;",subs:[{text:"离开提醒",icon:"&#xe628;",url:"/sundries/leavepage"},{text:"弹框关闭提醒",icon:"&#xe665;",url:"/sundries/leavedlg"},{text:"流控处理",icon:"&#xe629;",url:"/sundries/preservice"}]}],p={},o={},r={},n=function(e){if(!n.$inited){n.$inited=1;for(var i=0,t=void 0,a=void 0,l=void 0,d=void 0;i<s.length;i++)t=s[i],t[0],a=t[1],l=t[2],d=l.split("-"),r[a]=d.reverse(),p[a]=l,o[a]=e}},l=function(e){for(var i=[],t=0;t<e.length;t++)i.push(e.charCodeAt(t).toString(32));return"k"+i.join("")},d={},b={},c={},u={},x=function(){if(!x.$inited){x.$inited=1;for(var e=a.length-1,i=void 0;e>=0;e--){i=a[e],i.key=l(i.text);for(var t="",p=i.subs.length-1,o=void 0;p>=0;p--)if(o=i.subs[p],o.icon)t=o.url,d[t]=o,b[t]=i.key,o.key=t.replace(/\//g,"x"),o.pathText=[i.text,o.text],s.push([o.permission||-1,t,o.text+"-"+i.text]);else if(o.subs&&o.subs.length){o.key=l(o.text),o.pathText=[i.text,o.text],u[o.key]=o;for(var r=o.subs.length-1,n=void 0;r>=0;r--)n=o.subs[r],t=n.url,d[t]=o,b[t]=i.key,n.key=t.replace(/\//g,"x"),n.pathText=[i.text,o.text,n.text],s.push([n.permission||-1,t,[n.text,o.text,i.text].join("-")]);o.subs.length||i.subs.splice(p,1)}i.url=t,c[i.key]=i.subs;var h=i.subs[0];h.canFolder&&(h.folderExpand=!0)}}};t.exports={route:function(e){return x(),n(e),{breadcrumbs:r,titles:p,routes:o}},menu:function(){return x(),{menus:a,urlsMap:d,urlsToMainMap:b,menusMap:c,subsMap:u}}}}),define("app/views/partials/header-search",["magix","../../menu","$"],function(e,i,t){var s=e("magix");s.applyStyle("p8e",'.p8e-456{box-shadow:0 3px 3px #eee;list-style:none;margin:0;border:1px solid #e6e6e6;border-radius:4px;position:relative;background-color:#fff}.p8e-456:before{top:-7px;border:10px solid transparent;border-top:0;border-bottom:6px solid #e6e6e6}.p8e-456:after,.p8e-456:before{content:"";position:absolute;right:14px;width:0;height:0}.p8e-456:after{top:-6px;border:10px solid transparent;border-top:0;border-bottom:6px solid #fff}.p8e-5a8{color:#666;display:block;padding-left:7px;margin:6px 10px;height:26px;line-height:26px;border-radius:4px;white-space:nowrap}.p8e-5a8:hover{color:#fff;background-color:#8383eb}.p8e-433{float:right;margin-right:89px;position:relative}.p8e-7cb,.p8e-427{position:absolute;top:19px;left:15px;color:#a1a1f0;cursor:pointer}.p8e-7cb{left:auto;right:10px;font-size:14px}.p8e-4f8{width:260px;height:30px;border-radius:30px;border:0;line-height:30px;padding-left:40px;background-color:#5a5ad1;margin-top:10px;color:#e0e0fa!important;transition:border-radius .3s ease-out}.p8e-4f8::-webkit-input-placeholder{color:#b9b9f9}.p8e-4f8::-moz-placeholder{color:#b9b9f9}.p8e-4f8:focus{border-radius:4px}.p8e-456{position:absolute;top:58px;width:258px;left:2px}.p8e-5c3{max-height:326px;overflow:auto}.p8e-5a8:hover{color:#666;background-color:#fff}.p8e-351 .p8e-5a8{color:#fff;background-color:#8383eb}.p8e-456:after,.p8e-456:before{left:14px;right:auto}');var a=e("../../menu"),p=e("$"),o=new s.Cache,r=/[\-#$\^*()+\[\]{}|\\,.?\s]/g,n=function(e){var i=o.get(e);if(!i){var t=["(.*?)("],s=e.split("");if(s.length){for(;s.length;)t.push(s.shift().replace(r,"\\$&"),")(.*?)(");t.pop()}t.push(")(.*?)"),t=t.join("");for(var a=new RegExp(t,"i"),p=[],n=e.length,l=1;n>0;)n--,p.push("$",l,"($",l+1,")"),l+=2;p.push("$",l),o.set(e,i={regexp:a,replacement:p.join("")})}return i},l=function(e){for(var i=a.menu(),t=i.menus,s=[],p=n(e),o=function(e){var i=e.subs;if(i&&i.length)for(var t=0;t<i.length;t++){var a=i[t];p.regexp.test(a.text)||p.regexp.test(a.url)?a.subs?s.push.apply(s,a.subs):s.push(a):o(a)}},r=0;r<t.length;r++){var l=t[r];o(l)}return s},d=function(e,i){var t=p.Deferred();if(e){var s=l(e);t.resolve(s)}else t.resolve([]);return t.promise()};t.exports=s.View.extend({tmpl:{html:'<div mx-guid="g4" class="p8e-433" id="gsearch_<%=$$.viewId%>"><span class="pce-334 p8e-427">&#xe608;</span><span class="pce-334 p8e-7cb p16-ab9" title="清除输入" mx-click="clear()">&#xe68c;</span><input mx-guid="g1" type="text" class="p8e-4f8" mx-input="search()" mx-keyup="search()" mx-paste="search()" mx-focusin="search()" id="sipt_<%=$$.viewId%>" placeholder="搜索..."/><div mx-guid="g3" id="gsearch_result_<%=$$.viewId%>" class="p8e-456<%if(!$$.searchList||!$$.searchList.length){%> p16-ab9<%}%>">2</div></div>',subs:[{s:"2",keys:["viewId","searchList"],tmpl:'<%if($$.searchList&&$$.searchList.length){%><ul mx-guid="g2" mx-mouseout="out()" mx-mousemove="move()" class="p8e-5c3">3</ul><%}%>',path:'div[mx-guid="g3"]',attr:'id="gsearch_result_<%=$$.viewId%>" class="p8e-456<%if(!$$.searchList||!$$.searchList.length){%> p16-ab9<%}%>"',attrs:[{n:"id",p:1},{n:"class",p:1,f:"className"}]},{keys:["viewId"],path:'input[mx-guid="g1"]',attr:'id="sipt_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{s:"3",keys:["viewId","searchKeyRegInfo"],tmpl:'<%for(var i=0;i<$$.searchList.length;i++){var item=$$.searchList[i]%><li data-idx="<%=i%>" id="sg_<%!$$.viewId%>_<%!i%>"><a href="#!<%=item.url%>" class="p8e-5a8 p16-9e0" mx-click="hide()" title="<%=item.pathText.join(\'>\')%>"><%=item.pathText[0]%><%for(var j=1;j<item.pathText.length;j++){var text=item.pathText[j]%>&gt;<%!text.replace($$.searchKeyRegInfo.regexp,$$.searchKeyRegInfo.replacement).replace(/\\)\\(/g,\'\').replace(/\\(/g,\'<b>\').replace(/\\)/g,\'</b>\')%><%}%></a></li><%}%>',path:'ul[mx-guid="g2"]',pKeys:["searchList"]},{keys:["viewId"],path:'div[mx-guid="g4"]',attr:'id="gsearch_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]}]},init:function(){this.$idx=-1},render:function(){this.updater.digest({viewId:this.id})},"clear<click>":function(){var e=this,i=p("#gsearch_"+e.id+" input");i.val(""),i.trigger("input")},"search<keyup,paste,input,focusin>":function(e){var i=this,t=i.updater.get("searchList");if("focusin"==e.type&&t&&t.length)return void p("#gsearch_result_"+i.id).removeClass("p16-ab9");var a=p.trim(e.eventTarget.value),o=a?"removeClass":"addClass";if(p("#gsearch_"+i.id+" .p8e-7cb")[o]("p16-ab9"),"keyup"==e.type&&t&&t.length)if(p("#gsearch_result_"+i.id).removeClass("none"),40==e.keyCode)i.normal(),i.$idx++,i.$idx>=t.length&&(i.$idx=0),i.highlight();else if(38==e.keyCode)i.normal(),i.$idx--,i.$idx<0&&(i.$idx=t.length-1),i.highlight();else if(13==e.keyCode){var r=p("#sg_"+i.id+"_"+i.$idx);if(r&&r.length){var l=r.find("a").attr("href").slice(2);s.Router.to(l),i.hideSearchList(),p("#sipt_"+i.id).blur()}}clearTimeout(i.$sTimer),i.$sTimer=setTimeout(i.wrapAsync(function(){var t=p.trim(e.eventTarget.value);t!=i.$sValue&&(i.$idx=-1,i.$sValue=t,d(t).then(function(e){i.updater.digest({searchKeyRegInfo:n(t),searchList:e})}))}),300)},normal:function(){var e=this;p("#sg_"+e.id+"_"+e.$idx).removeClass("p8e-351")},highlight:function(e){var i=this,t=p("#sg_"+i.id+"_"+i.$idx);if(t.addClass("p8e-351"),!e&&t.length){i.$ignore=1;var s=32.6*(i.$idx+1),a=p("#gsearch_result_"+i.id+" ul"),o=a.height(),r=a.prop("scrollTop"),n=Math.ceil(o/32.6);s<r+32.6?a.prop("scrollTop",s-32.6):s>r+o&&a.prop("scrollTop",32.6*(i.$idx+2-n))}},hideSearchList:function(){var e=this;p("#gsearch_result_"+e.id).addClass("p16-ab9"),e.normal(),e.$idx=-1},"hide<click>":function(){this.hideSearchList()},"out<mouseout>":function(e){if(!s.inside(e.relatedTarget,e.eventTarget)){var i=this;i.normal(),i.$idx=-1}},"move<mousemove>":function(e){var i=this;if(i.$ignore)return void delete i.$ignore;var t=p(e.target);if(t.is("a")&&(t=t.parent()),t.is("li")){var s=t.data("idx");s!=i.$idx&&(i.normal(),i.$idx=s,i.highlight(!0))}},"$doc<click>":function(e){var i=this;s.inside(e.target,"gsearch_"+i.id)||i.hideSearchList()}})}),define("app/views/partials/header",["magix","$","../../menu","../../mixins/dialog"],function(e,i,t){var s=e("magix"),a=e("$"),p=a(document),o=e("../../menu"),r=e("../../mixins/dialog");s.applyStyle("pbb",'.pbb-3be{height:50px;background-color:#6363e6;color:hsla(0,0%,100%,.6);z-index:400;position:relative;width:100%;left:0;top:0;right:0}.pbb-45c{float:left;height:50px;width:160px;transition:width .3s ease-out;background-color:#595cd2;color:#fff;overflow:hidden}.pbb-45c:active,.pbb-45c:focus,.pbb-45c:hover{color:#fff}.pbb-a9d{width:50px;font-size:28px;margin-left:23px;text-align:center;transition:margin-left .3s ease-out}.pbb-a9d,.pbb-7fa{float:left;height:50px;line-height:50px}.pbb-7fa{width:80px;font-size:20px;position:relative;top:1px;left:-5px;transition:width .3s ease-out,font-size .3s ease-out}.pbb-1e0 .pbb-45c{width:50px}.pbb-1e0 .pbb-bb1{margin-left:50px}.pbb-1e0 .pbb-66f{left:38px}.pbb-1e0 .pbb-66f:before{left:-4px;content:"\\e789"}.pbb-1e0 .pbb-a9d{margin-left:0}.pbb-1e0 .pbb-7fa{width:0;font-size:0;overflow:hidden}.pbb-bb1{margin-left:160px;padding:0 15px 0 0;position:relative;z-index:50}.pbb-66f{position:absolute;left:148px;top:100%;width:12px;height:24px;line-height:24px;background-color:#595cd2;font-size:20px;color:#fff;border-radius:0 0 0 4px;cursor:pointer;transition:left .3s ease-out}.pbb-66f:before{content:"\\e787";position:relative;left:-4px}.pbb-380{position:relative;transition:width .3s ease-out}.pbb-5b9{float:right}.pbb-9d4{float:left;position:relative;padding:0 10px}.pbb-530,.pbb-e7e{float:left;height:50px;line-height:50px;color:#fff;padding-right:10px;font-size:12px;cursor:pointer}.pbb-530:focus,.pbb-530:hover,.pbb-e7e:focus,.pbb-e7e:hover{color:#fff}.pbb-530{padding-right:3px;font-size:22px}.pbb-669{position:absolute;top:100%;right:0;width:140px;display:none;z-index:8;padding:8px 0 0}.pbb-a1b{box-shadow:0 3px 3px #eee;list-style:none;margin:0;border:1px solid #e6e6e6;border-radius:4px;position:relative;background-color:#fff}.pbb-a1b:before{top:-7px;border:10px solid transparent;border-top:0;border-bottom:6px solid #e6e6e6}.pbb-a1b:after,.pbb-a1b:before{content:"";position:absolute;right:14px;width:0;height:0}.pbb-a1b:after{top:-6px;border:10px solid transparent;border-top:0;border-bottom:6px solid #fff}.pbb-9d4:hover .pbb-669{display:block}.pbb-b81{border-top:1px dashed #e6e6e6}.pbb-7bd:hover{background-color:#fafafa}.pbb-7bd{color:#666;display:block;padding-left:7px;margin:6px 10px;height:26px;line-height:26px;border-radius:4px;white-space:nowrap}.pbb-7bd:hover{color:#fff;background-color:#8383eb}.pbb-194{float:left;margin-left:17px;width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pbb-3cd{font-size:22px;float:left;margin:0 6px 0 10px;color:#a1a1f0}.pbb-a37,.pbb-3cd{height:50px;line-height:50px}.pbb-a37{display:block;color:#b9b9f9}'),t.exports=s.View.extend({tmpl:{html:'<div mx-guid="g3" class="pbb-3be" id="header_<%=$$.viewId%>"><a href="#!/index" class="pbb-45c"><span class="pbb-a9d pce-334">&#xe67b;</span><span class="pbb-7fa">Magix</span></a><span class="pbb-66f pce-334" mx-click="triggerNav()"></span><div class="pbb-bb1"><div class="pbb-380"><div mx-guid="g1" class="pbb-194">2</div><ul class="pbb-5b9"><li class="pbb-9d4"><span class="pbb-530 pce-334">&#xe621;</span><a mx-guid="g2" href="javascript:;" class="pbb-e7e">3</a><div class="pbb-669"><ul class="pbb-a1b"><li><a href="javascript:;" mx-click="changePassword()" class="pbb-7bd">修改密码</a></li><li><a href="javascript:;" mx-click="logout()" class="pbb-7bd">退出</a></li><li class="pbb-b81"></li><li><a href="javascript:;" mx-click="showAgreement()" class="pbb-7bd">查看使用协议</a></li></ul></div></li></ul><div mx-view="app/views/partials/header-search"></div></div></div></div>',subs:[{s:"2",keys:["bcs"],tmpl:'<%if($$.bcs){%><span class="pce-334 pbb-3cd">&#xe601;</span><span class="pbb-a37"><%=$$.bcs%></span><%}%>',path:'div[mx-guid="g1"]'},{s:"3",keys:["userName"],tmpl:"<%=$$.userName%>",path:'a[mx-guid="g2"]'},{keys:["viewId"],path:'div[mx-guid="g3"]',attr:'id="header_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]}]},mixins:[r],init:function(){this.observe({path:!0})},render:function(){var e=o.route(),i=this,t=s.Router.parse(),a=e.breadcrumbs[t.path];a=a&&a.length?a.join(" > "):"",i.updater.digest({bcs:a,userName:"彳刂",viewId:i.id})},"triggerNav<click>":function(){var e=a("#header_"+this.id);e.toggleClass("pbb-1e0");var i=e.hasClass("pbb-1e0");p.data("navshrink",i).trigger({type:"navslide",shrink:i}),setTimeout(this.wrapAsync(function(){p.trigger("navslidend")}),300)},"logout<click>":function(){this.alert("仅退出示意，请继续浏览^_*")},"showAgreement<click>":function(){this.mxDialog("app/views/partials/agreement")},"changePassword<click>":function(){this.mxDialog("app/views/partials/password")}})}),define("app/views/partials/robot",["magix","$"],function(e,i,t){var s=e("magix"),a=e("$");s.applyStyle("p89",'.p89-f9f{font-size:20px;line-height:32px}.p89-f9f,a.p89-bf7{height:32px;display:block}a.p89-bf7{width:32px;margin-top:4px;border-radius:2px;text-align:center;opacity:.4;color:#fff;background-color:#6363e6;position:relative}.p89-bf7:hover{opacity:.8}.p89-tip{position:absolute;right:46px;bottom:-12px;width:210px;padding:5px;letter-spacing:0;background-color:#6363e6;border-radius:5px;display:none;font-weight:400;text-align:left}.p89-bf7:hover .p89-tip{display:block}.p89-tip:before{content:" ";position:absolute;right:-5px;bottom:24px;border:5px solid transparent;border-left-color:#6363e6;border-right:0}.p89-8b6{position:fixed;right:20px;bottom:20px;z-index:5;transform:translateZ(0)}'),t.exports=s.View.extend({tmpl:{html:'<a href="https://github.com/thx/magix-project/issues/new" target="_blank" class="p89-bf7"><span class="pce-334 p89-f9f">&#xe68a;</span><span class="p89-tip">有任何问题都可以提交issure来咨询或交流。</span></a>',subs:[]},render:function(){var e=this;a("#"+e.id).addClass("p89-8b6"),e.updater.digest()}})}),define("app/views/partials/nav",["magix","$","../../menu"],function(e,i,t){var s=e("magix"),a=e("$");s.applyStyle("p4b",'.p4b-nav{position:relative;z-index:399;background:#000;width:160px;height:100%;font-size:14px;transition:width .3s ease-out;transform:translateZ(0);float:left}.p4b-5ca{background:#3e4048;width:100%;left:0;direction:rtl}.p4b-5ca,.p4b-1b0{height:100%;position:absolute;padding-top:40px;top:0;overflow:auto}.p4b-1b0{background:#31323d;width:200px;padding-bottom:42px;left:160px}.p4b-9d4{background-color:#3e4048;cursor:pointer;border-left:4px solid transparent;overflow:hidden;margin-bottom:14px;height:40px}.p4b-9d4:hover .p4b-5b9{color:hsla(0,0%,100%,.3)}.p4b-02d{opacity:.6}.p4b-1fd,.p4b-986{background:#32323d;border-left-color:#6364e5}.p4b-1fd .p4b-5b9,.p4b-986 .p4b-5b9{color:hsla(0,0%,100%,.3)}.p4b-1fd .p4b-c74:before,.p4b-986 .p4b-c74:before{content:"\\e789"}.p4b-5b9{display:block;float:left}.p4b-2eb{width:66px;font-size:14px;text-align:left;color:hsla(0,0%,100%,.45)}.p4b-530,.p4b-c74,.p4b-2eb{height:40px;line-height:40px;float:left}.p4b-530,.p4b-c74{color:hsla(0,0%,100%,.5)}.p4b-530{width:54px;text-align:left;padding-left:25px}.p4b-c74{width:36px;text-align:right;padding-right:15px}.p4b-c74:before{content:"\\e692"}.p4b-b63{padding:0 10px 0 20px}.p4b-0c3{float:right;width:40px;text-align:center}.p4b-dae,.p4b-0c3{height:40px;line-height:40px}.p4b-dae{color:#7f7f89;margin-bottom:4px}.p4b-d15{padding-left:10px}.p4b-b6e{display:block;padding:10px 0;color:#afafbc}.p4b-040,.p4b-b6e:active,.p4b-b6e:focus,.p4b-b6e:hover{color:#8787ea}.p4b-040 .p4b-485,.p4b-b6e:active .p4b-485,.p4b-b6e:focus .p4b-485,.p4b-b6e:hover .p4b-485{color:#8b8bed}.p4b-485{color:#a1a1b2;float:left;width:20px;margin-top:3px}.p4b-0df{display:block;margin-left:20px}.p4b-508{width:50px}.p4b-508 .p4b-c74,.p4b-508 .p4b-2eb{display:none}.p4b-508 .p4b-530{width:46px;padding-left:0;text-align:center}.p4b-508 .p4b-1b0{left:50px}');var p=e("../../menu"),o=p.menu(),r=o.menus,n=o.urlsToMainMap,l=o.subsMap,d=o.menusMap,b={triangle:{m:{x:-1,y:-1},n:{x:-1,y:0},p:{x:-1,y:-1}},getVirtualCoordinate:function(e){var i=this,t=i.$node.offset();return{x:e.pageX-t.left,y:i.$node.outerHeight()-(e.pageY-t.top)}},update:function(e){var i=this,t=i.triangle;i.$node=e;var s=e.outerWidth();t.m.x=s,t.m.y=e.outerHeight(),t.n.x=s},updatePoint:function(e){var i=this;i.triangle.p=i.getVirtualCoordinate(e)},isInTriangle:function(e){var i=this,t=i.getVirtualCoordinate(e),s=i.triangle;return t.x>s.m.x||t.x>=s.p.x&&(t.y>=s.p.y&&(s.m.y-t.y)/(s.m.x-t.x)>=(s.m.y-s.p.y)/(s.m.x-s.p.x)||t.y<s.p.y&&(s.n.y-t.y)/(s.n.x-t.x)<(s.n.y-s.p.y)/(s.n.x-s.p.x))}};t.exports=s.View.extend({tmpl:{html:'<div mx-guid="g1" class="p4b-5ca p16-3d3" mx-mouseout="hideSubs()" mx-mouseover="stopHide()" id="main_<%=$$.viewId%>" mx-contextmenu="preventHide()"><ul mx-guid="g0">2</ul></div><div mx-guid="g3" class="p16-3d3 p16-d72 p4b-1b0<%if(!$$.showSub){%> p16-ab9<%}%>" id="subs_<%=$$.viewId%>" mx-mouseout="hideSubs()" mx-mouseover="stopHide()" mx-contextmenu="preventHide()">3</div>',subs:[{s:"2",keys:["menus"],tmpl:'<li class="p4b-9d4 p16-c8d" data-key="index" mx-mouseover="startShowSubs()" mx-mousemove="showSubs()"><a class="p4b-5b9 p16-c8d" href="#!/index" hidefocus="true"><span class="p4b-530 pce-334">&#xe69c;</span><span class="p4b-2eb">首页</span></a></li><%for(var i=0,menu;i<$$.menus.length;i++){menu=$$.menus[i]%><li class="p4b-9d4 p16-c8d" data-key="<%=menu.key%>" mx-mouseover="startShowSubs({key:\'<%=menu.key%>\'})" mx-mousemove="showSubs({key:\'<%=menu.key%>\'})"><a class="p4b-5b9" href="#!<%=menu.url%>" hidefocus="true"><span class="p4b-530 pce-334"><%!menu.icon%></span><span class="p4b-2eb"><%=menu.text%></span></a><span class="p4b-c74 pce-334"></span></li><%}%>',path:'ul[mx-guid="g0"]'},{keys:["viewId"],path:'div[mx-guid="g1"]',attr:'id="main_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{s:"3",keys:["showSub","viewId","subs"],tmpl:'<%if($$.subs){%><ul><%for(var j=0,subMenu;j<$$.subs.length;j++){subMenu=$$.subs[j];if(subMenu.subs&&subMenu.subs.length){%><li class="p4b-b63"><div class="p4b-dae p16-cp" <%if(subMenu.canFolder){%> mx-click="toggleSubMenus({key:\'<%=subMenu.key%>\'})" <%}%>><%=subMenu.text%> <%if(subMenu.canFolder){%><i class="pce-334 p4b-0c3"><%if(subMenu.folderExpand){%> &#xe786; <%}else{%> &#xe692; <%}%></i><%}%></div><ul class="p4b-d15" <%if(subMenu.canFolder&&!subMenu.folderExpand){%> style="display:none" <%}if(subMenu.canFolder){%> data-toggle-menu="true" <%}%>><%for(var x=0,item;x<subMenu.subs.length;x++){item=subMenu.subs[x]%><li><a <%if(item.url){%>href="#!<%=item.url%>" <%}else{%>href="javascript:;" <%}%> class="p4b-b6e"><i class="pce-334 p4b-485"><%!item.icon%></i><span class="p4b-0df"><%=item.text%></span></a></li><%}%></ul></li><%}else{%><li class="p4b-b63"><a href="#!<%=subMenu.url%>" class="p4b-b6e"><i class="pce-334 p4b-485" style="margin-right: 5px"><%!subMenu.icon%></i><%=subMenu.text%></a></li><%}}%></ul><%}%>',path:'div[mx-guid="g3"]',attr:'class="p16-3d3 p16-d72 p4b-1b0<%if(!$$.showSub){%> p16-ab9<%}%>" id="subs_<%=$$.viewId%>"',attrs:[{n:"class",p:1,f:"className"},{n:"id",p:1}],mask:"221"}]},init:function(){var e=this;s.Router.on("changed",function(){e.highlight(),e.highlightSub()})},render:function(){var e=this,i=a("#"+e.id);i.addClass("p4b-nav"),e.$node=i,e.updater.digest({viewId:e.id,menus:r}),e.$subs=a("#subs_"+e.id),b.update(e.$node),e.highlight()},highlight:function(){var e=s.Router.parse(),i=e.path;n[i]||(i=i.replace(/\-[^-]+$/,""));var t=n[i];"/index"==i&&(t="index");var p=this,o=a("#main_"+p.id);o.find("li").removeClass("p4b-986").removeClass("p4b-02d"),p.$mainMenu=o.find("[data-key="+t+"]").addClass("p4b-986"),p.$mainMenuKey=t},highlightSub:function(){var e=this,i=s.Router.parse(),t=i.path;n[t]||(t=t.replace(/\-[^-]+$/,"")),e.$subs.find("a").removeClass("p4b-040");var a=e.$subs.find('[href="#!'+t+'"]').addClass("p4b-040"),p=a.parents("ul");if("none"==p.css("display")){var o=p.prev("div[mx-click]");o.length&&o.trigger("click")}},toggleSubs:function(e,i,t){var s=this;t=e,e||(t="index"),t!=s.$mainMenuKey?s.$mainMenu.addClass("p4b-02d"):s.$mainMenu.removeClass("p4b-02d");var p=e+"?"+!!e;if(s.$flag!=p){if(s.$flag=p,s.$menu&&s.$menu.removeClass("p4b-1fd"),e&&s.$key!=e){s.$key=e;var o=d[e];s.updater.set({subs:o})}s.$menu=a(i).addClass("p4b-1fd"),s.updater.digest({showSub:!!e}),e&&s.highlightSub()}},hideSubs:function(e){var i=this;delete i.$preventHide;var t=function(){i.$menu&&(i.$menu.removeClass("p4b-1fd"),i.$mainMenu.removeClass("p4b-02d"),delete i.$menu),delete i.$flag,i.updater.digest({showSub:!1})};e?(console.log("immediately hide"),t()):i.$hideTimer=setTimeout(t,100)},"startShowSubs<mouseover>":function(e){if(!s.inside(e.relatedTarget,e.eventTarget)){var i=this;b.updatePoint(e),clearTimeout(i.$showTimer);var t=e.eventTarget,a=e.params.key,p=i.updater.get("showSub");a&&!p?i.toggleSubs(a,t):i.$showTimer=setTimeout(function(){i.toggleSubs(a,t)},200)}},"stopHide<mouseover>":function(e){if(!s.inside(e.relatedTarget,e.eventTarget)){var i=this;clearTimeout(i.$hideTimer)}},"hideSubs<mouseout>":function(e){if(!s.inside(e.relatedTarget,e.eventTarget)){var i=this;if(i.$preventHide)return void delete i.$preventHide;clearTimeout(i.$showTimer),i.hideSubs()}},"toggleSubMenus<click>":function(e){var i=a(e.eventTarget),t=l[e.params.key];i.hasClass("iconfont")&&(i=i.parent());var s=i.next(),p=i.find(".iconfont");"none"==s.css("display")?(t.folderExpand=!0,s.slideDown(),p.html("&#xe786;")):(t.folderExpand=!1,s.slideUp(),p.html("&#xe692;"))},"showSubs<mousemove>":function(e){var i=this;b.isInTriangle(e)||i.toggleSubs(e.params.key,e.eventTarget)},"preventHide<contextmenu>":function(){var e=this;if(e.$preventHide=!0,!e.$listened){e.$listened=!0;var i=a(document),t=function(a){s.inside(a.target,e.id)||(delete e.$listened,i.off("mousemove mouseup",t),e.hideSubs(!0))};i.on("mousemove mouseup",t)}},"$doc<navslide>":function(){this.$node.toggleClass("p4b-508")},"$doc<navslidend>":function(){console.log("update triangle"),b.update(this.$node)},"$win<resize>":function(){console.log("update triangle"),b.update(this.$node)}})}),define("app/views/default",["magix"],function(e,i,t){var s=e("magix"),a=s.Router;t.exports=s.View.extend({tmpl:{html:'<div mx-view="app/views/partials/header" style="height:50px"></div><div class="pc6-671"><div mx-view="app/views/partials/nav"></div><div class="pc6-a7b"><div mx-guid="g0" id="inmain" class="pc6-a9c" mx-view="<%=$$.mainView%>"><div class="p28-f0b"><span></span></div></div></div></div><div mx-view="app/views/partials/robot"></div>',subs:[{keys:["mainView"],path:'div[mx-guid="g0"]',attr:'mx-view="<%=$$.mainView%>"',attrs:[{n:"mx-view",v:1}]}]},init:function(){this.observe({path:!0})},render:function(){var e=this,i=a.parse();e.updater.digest({mainView:"app/views"+i.path})}})});