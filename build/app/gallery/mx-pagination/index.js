define("app/gallery/mx-pagination/index",["magix","$"],function(a,e,t){var d=a("magix"),i=a("$");d.applyStyle("pabcd1d",".pabcd1d-d9a{background-color:#fafafa;padding-top:12px}.pabcd1d-e83{vertical-align:text-bottom}.pabcd1d-b11,.pabcd1d-58f{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.pabcd1d-58f{margin-bottom:10px;color:#999;float:left}.pabcd1d-b11{text-align:right;float:right}.pabcd1d-num{display:inline-block}.pabcd1d-f12{font-size:12px}.pabcd1d-num a{position:relative;float:left;padding:6px 12px;margin:0 3px;text-decoration:none;z-index:3;border-radius:4px;min-width:32px;height:32px;padding-left:0;padding-right:0;text-align:center}.pabcd1d-num a:hover{background-color:#5a5ad1;color:#fff}.pabcd1d-dfe a{color:#fff;background-color:#6363e6}.pabcd1d-d86 a,.pabcd1d-d86 a:hover{color:#999;background:transparent;cursor:not-allowed}"),t.exports=d.View.extend({tmpl:{html:'<div class="pabcd16-c8d pabcd1d-d9a"><div class="pabcd1d-58f"><span class="pabcd1d-e83">当前第<b mx-guid="g0">1</b>条，共<b mx-guid="g1">2</b>条，每页展现</span><div mx-guid="g2" class="pabcd16-043 pabcd16-fdc" mx-view="app/gallery/mx-dropdown/index?list=<%@[10,20,30,40,50,100]%>&width=80&selected=<%@$$.size%>" mx-change="changeSize()"></div><span class="pabcd1d-e83">条</span></div><div class="pabcd1d-b11"><ul mx-guid="g8">4</ul></div></div>',subs:[{s:"1",keys:["offsetStart","offsetEnd"],tmpl:"<%=$$.offsetStart%> - <%=$$.offsetEnd%>",path:'b[mx-guid="g0"]'},{s:"2",keys:["total"],tmpl:"<%=$$.total%>",path:'b[mx-guid="g1"]'},{keys:["size"],path:'div[mx-guid="g2"]',attr:'mx-view="app/gallery/mx-dropdown/index?list=<%@[10,20,30,40,50,100]%>&width=80&selected=<%@$$.size%>"',attrs:[{n:"mx-view",v:1}]},{s:"4",keys:["start","end","page","pages"],tmpl:'<li class="pabcd1d-num<%if($$.page==1){%> pabcd1d-d86<%}%>"><a mx-guid="g3" href="javascript:;" <%if($$.page>1){%> mx-click="toPrev()" <%}%>><span class="pabcdce-334 pabcd1d-f12">&#xe61e;</span></a></li><%if($$.start>1){%><li class="pabcd1d-num"><a href="javascript:;" mx-click="toPage({page:1})">1</a></li><%}if($$.start>2){%><li class="pabcd1d-d86 pabcd1d-num"><a href="javascript:;">...</a></li><%}for(var i=$$.start;i<=$$.end;i++){%><li class="pabcd1d-num<%if(i==$$.page){%> pabcd1d-dfe<%}%>"><a href="javascript:;" mx-click="toPage({page:<%=i%>})"><%=i%></a></li><%}if($$.end+2<=$$.pages){%><li class="pabcd1d-num pabcd1d-d86"><a href="javascript:;">...</a></li><%}if($$.end<$$.pages){%><li class="pabcd1d-num"><a href="javascript:;" mx-click="toPage({page:<%=$$.pages%>})"><%=$$.pages%></a></li><%}%><li class="pabcd1d-num<%if($$.page==$$.pages){%> pabcd1d-d86<%}%>"><a mx-guid="g6" href="javascript:;" <%if($$.page<$$.pages){%> mx-click="toNext()" <%}%>><span class="pabcdce-334 pabcd1d-f12">&#xe61b;</span></a></li>',path:'ul[mx-guid="g8"]'}]},init:function(a){var e=this;e.$extra=a;var t=0|a.total||0,d=a.size||20,i=Math.ceil((t||1)/d),p=a.page||1;e.updater.set({step:a.step||7,page:p,pages:i,total:t,size:d})},render:function(){var a=this,e=a.cal();a.updater.set(e).digest()},cal:function(){var a=this,e=a.updater.get(),t=0|e.page,d=0|e.pages;t>d&&(t=d);var i=0|e.step,p=i/2|0,s=Math.max(1,t-p),c=Math.min(d,s+i-1);s=Math.max(1,c-i+1);var r;return s<=2&&(r=3-s,c+r<d&&(c+=r)),c+2>d&&(r=2-(d-c),s-r>1&&(s-=r)),3==s&&(s-=1),c+2==d&&(c+=1),{offsetStart:(t-1)*e.size+1,offsetEnd:Math.min(e.total,t*e.size),page:t,start:s,end:c}},fireEvent:function(){var a=this,e=i("#"+a.id),t=a.updater.get();e.trigger({type:"change",state:{page:t.page,size:t.size}})},"toPage<click>":function(a){a.preventDefault();var e=this;e.updater.set({page:a.params.page}),e.render(),e.fireEvent()},"toPrev<click>":function(a){a.preventDefault();var e=this;e.updater.set({page:e.updater.get("page")-1}),e.render(),e.fireEvent()},"toNext<click>":function(a){a.preventDefault();var e=this;e.updater.set({page:e.updater.get("page")+1}),e.render(),e.fireEvent()},"changeSize<change>":function(a){a.stopPropagation();var e=this;e.updater.set({page:1,size:a.item}),e.render(),e.fireEvent()}})});