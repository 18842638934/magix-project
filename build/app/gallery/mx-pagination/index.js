define("app/gallery/mx-pagination/index",["magix","$"],function(a,e,t){var i=a("magix"),p=a("$");i.applyStyle("p1d",".p1d-d9a{background-color:#fafafa;padding-top:12px}.p1d-e83{vertical-align:text-bottom}.p1d-b11,.p1d-58f{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.p1d-58f{margin-bottom:10px;color:#999;float:left}.p1d-b11{text-align:right;float:right}.p1d-num{display:inline-block}.p1d-f12{font-size:12px}.p1d-num a{position:relative;float:left;padding:6px 12px;margin:0 3px;text-decoration:none;z-index:3;border-radius:4px;min-width:32px;height:32px;padding-left:0;padding-right:0;text-align:center}.p1d-num a:hover{background-color:#5a5ad1;color:#fff}.p1d-dfe a{color:#fff;background-color:#6363e6}.p1d-d86 a,.p1d-d86 a:hover{color:#999;background:transparent;cursor:not-allowed}"),t.exports=i.View.extend({tmpl:{html:'<div class="p16-c8d p1d-d9a"><div class="p1d-58f"><span class="p1d-e83">当前第<b mx-guid="g0">1</b>条，共<b mx-guid="g1">2</b>条，每页展现</span><div mx-guid="g2" class="p16-043 p16-fdc" mx-view="app/gallery/mx-dropdown/index?list=<%@[10,20,30,40,50,100]%>&width=80&selected=<%=$$.size%>" mx-change="changeSize()"></div><span class="p1d-e83">条</span></div><div class="p1d-b11"><ul mx-guid="g8">4</ul></div></div>',subs:[{s:"1",keys:["offsetStart","offsetEnd"],tmpl:"<%=$$.offsetStart%> - <%=$$.offsetEnd%>",path:'b[mx-guid="g0"]'},{s:"2",keys:["total"],tmpl:"<%=$$.total%>",path:'b[mx-guid="g1"]'},{keys:["size"],path:'div[mx-guid="g2"]',attr:'mx-view="app/gallery/mx-dropdown/index?list=<%@[10,20,30,40,50,100]%>&width=80&selected=<%=$$.size%>"',attrs:[{n:"mx-view",v:1}]},{s:"4",keys:["start","end","page","pages"],tmpl:'<li class="p1d-num<%if($$.page==1){%> p1d-d86<%}%>"><a mx-guid="g3" href="javascript:;" <%if($$.page>1){%> mx-click="toPrev()" <%}%>><span class="pce-334 p1d-f12">&#xe61e;</span></a></li><%if($$.start>1){%><li class="p1d-num"><a href="javascript:;" mx-click="toPage({page:1})">1</a></li><%}if($$.start>2){%><li class="p1d-d86 p1d-num"><a href="javascript:;">...</a></li><%}for(var i=$$.start;i<=$$.end;i++){%><li class="p1d-num<%if(i==$$.page){%> p1d-dfe<%}%>"><a href="javascript:;" mx-click="toPage({page:<%=i%>})"><%=i%></a></li><%}if($$.end+2<=$$.pages){%><li class="p1d-num p1d-d86"><a href="javascript:;">...</a></li><%}if($$.end<$$.pages){%><li class="p1d-num"><a href="javascript:;" mx-click="toPage({page:<%=$$.pages%>})"><%=$$.pages%></a></li><%}%><li class="p1d-num<%if($$.page==$$.pages){%> p1d-d86<%}%>"><a mx-guid="g6" href="javascript:;" <%if($$.page<$$.pages){%> mx-click="toNext()" <%}%>><span class="pce-334 p1d-f12">&#xe61b;</span></a></li>',path:'ul[mx-guid="g8"]'}]},init:function(a){var e=this;e.$extra=a;var t=0|a.total||0,i=a.size||20,p=Math.ceil((t||1)/i),d=a.page||1;e.updater.set({step:a.step||7,page:d,pages:p,total:t,size:i})},render:function(){var a=this,e=a.cal();a.updater.set(e).digest()},cal:function(){var a=this,e=a.updater.get(),t=0|e.page,i=0|e.pages;t>i&&(t=i);var p=0|e.step,d=p/2|0,s=Math.max(1,t-d),r=Math.min(i,s+p-1);s=Math.max(1,r-p+1);var n;return s<=2&&(n=3-s,r+n<i&&(r+=n)),r+2>i&&(n=2-(i-r),s-n>1&&(s-=n)),3==s&&(s-=1),r+2==i&&(r+=1),{offsetStart:(t-1)*e.size+1,offsetEnd:Math.min(e.total,t*e.size),page:t,start:s,end:r}},fireEvent:function(){var a=this,e=p("#"+a.id),t=a.updater.get();e.trigger({type:"change",state:{page:t.page,size:t.size}})},"toPage<click>":function(a){a.preventDefault();var e=this;e.updater.set({page:a.params.page}),e.render(),e.fireEvent()},"toPrev<click>":function(a){a.preventDefault();var e=this;e.updater.set({page:e.updater.get("page")-1}),e.render(),e.fireEvent()},"toNext<click>":function(a){a.preventDefault();var e=this;e.updater.set({page:e.updater.get("page")+1}),e.render(),e.fireEvent()},"changeSize<change>":function(a){a.stopPropagation();var e=this;e.updater.set({page:1,size:a.item}),e.render(),e.fireEvent()}})});