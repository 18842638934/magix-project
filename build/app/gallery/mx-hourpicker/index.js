define("app/gallery/mx-hourpicker/index",["magix","../mx-dragdrop/index","$"],function(e,i,a){var t=e("magix");t.applyStyle("p26",".p26-e0c{height:60px;padding:5px 0}.p26-7e0{position:relative;width:4%;height:100%}.p26-7e0,.p26-e1c{display:inline-block}.p26-e1c{width:1px;height:20%;border-left:1px solid #e6e6e6;position:absolute;left:0;top:30%}.p26-f42 .p26-e1c{height:40%}.p26-bfe{position:absolute;left:0;top:30%;display:inline-block;width:100%;height:40%;z-index:1}.p26-dfe .p26-bfe{background-color:#6363e6;opacity:.3}.p26-end,.p26-cd3{display:none;position:absolute;background-color:#6363e6;font-size:10px;width:36px;height:15px;text-align:center;color:#fff;border-radius:2px;z-index:2}.p26-cd3{left:-18px;top:35px}.p26-end{right:-18px;top:0}.p26-421{position:absolute;left:50%;width:0;height:0;margin-left:-3px;border-left:3px solid transparent;border-right:3px solid transparent}.p26-cd3 .p26-421{border-bottom:3px solid #6363e6;top:-3px}.p26-end .p26-421{border-top:3px solid #6363e6;bottom:-3px}");var d=e("../mx-dragdrop/index"),p=e("$");a.exports=t.View.extend({tmpl:{html:'<div class="p26-e0c"><%for(var a=0;a<24;a++){%><div class="p26-7e0<%if(a%6===0){%> p26-f42<%}%>" mx-mousedown="start()" mx-mouseover="over()"><div class="p26-e1c"></div><div class="p26-bfe"></div><div class="p26-cd3"><div class="p26-421"></div><span><%=a%>:00</span></div><div class="p26-end"><div class="p26-421"></div><span><%=a+1%>:00</span></div></div><%}%><div class="p26-7e0 p26-f42"><div class="p26-e1c"></div></div></div>',subs:[]},init:function(e){this.$range=e.range},render:function(){var e=this;e.updater.digest(),e.$hours=p("#"+e.id+" .p26-7e0"),e.$range&&e.val(e.$range)},showRange:function(){this.$hours.each(function(e,i){i=p(i);var a=i.find(".p26-cd3"),t=i.find(".p26-end");i.hasClass("p26-dfe")?(a[i.prev().hasClass("p26-dfe")?"hide":"show"](),t[i.next().hasClass("p26-dfe")?"hide":"show"]()):(a.hide(),t.hide())})},val:function(e){var i=this,a=i.$hours;return e||""===e?(a.each(function(i,a){a=p(a),"1"==e.charAt(i)?a.addClass("p26-dfe"):a.removeClass("p26-dfe")}),i.showRange()):(e=[],a.each(function(i,a){a=p(a),i<24&&e.push(a.hasClass("p26-dfe")?1:0)}),e=e.join("")),e},"start<mousedown>":function(e){var i=this,a=p(e.eventTarget),t=a.hasClass("p26-dfe");a.toggleClass("p26-dfe"),i.showRange(),p("#"+i.id).trigger({type:"change",range:i.val()}),i.$active=t,i.$drag=!0,d.begin(e.target,function(){d.clear()},function(){delete i.$drag})},"over<mouseover>":function(e){var i=this;if(i.$drag){if(!t.inside(e.relatedTarget,e.eventTarget)){p(e.eventTarget)[i.$active?"removeClass":"addClass"]("p26-dfe"),i.showRange(),p("#"+i.id).trigger({type:"change",range:i.val()})}}}},{improve:function(e){e||(e="");for(var i=0;i<24;)e.charAt(i)||(e+="0"),i++;return e}})});