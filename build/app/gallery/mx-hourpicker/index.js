define("app/gallery/mx-hourpicker/index",["magix","../mx-dragdrop/index","$"],function(e,a,d){var i=e("magix");i.applyStyle("pabcd26",".pabcd26-e0c{height:60px;padding:5px 0}.pabcd26-7e0{position:relative;width:4%;height:100%}.pabcd26-7e0,.pabcd26-e1c{display:inline-block}.pabcd26-e1c{width:1px;height:20%;border-left:1px solid #e6e6e6;position:absolute;left:0;top:30%}.pabcd26-f42 .pabcd26-e1c{height:40%}.pabcd26-bfe{position:absolute;left:0;top:30%;display:inline-block;width:100%;height:40%;z-index:1}.pabcd26-dfe .pabcd26-bfe{background-color:#6363e6;opacity:.3}.pabcd26-end,.pabcd26-cd3{display:none;position:absolute;background-color:#6363e6;font-size:10px;width:36px;height:15px;text-align:center;color:#fff;border-radius:2px;z-index:2}.pabcd26-cd3{left:-18px;top:35px}.pabcd26-end{right:-18px;top:0}.pabcd26-421{position:absolute;left:50%;width:0;height:0;margin-left:-3px;border-left:3px solid transparent;border-right:3px solid transparent}.pabcd26-cd3 .pabcd26-421{border-bottom:3px solid #6363e6;top:-3px}.pabcd26-end .pabcd26-421{border-top:3px solid #6363e6;bottom:-3px}");var t=e("../mx-dragdrop/index"),c=e("$");d.exports=i.View.extend({tmpl:{html:'<div class="pabcd26-e0c"><%for(var ii = 0; ii < 24; ii++){%><div class="pabcd26-7e0<%if(ii%6===0){%> pabcd26-f42<%}%>" mx-mousedown="start()" mx-mouseover="over()"><div class="pabcd26-e1c"></div><div class="pabcd26-bfe"></div><div class="pabcd26-cd3"><div class="pabcd26-421"></div><span><%=ii%>:00</span></div><div class="pabcd26-end"><div class="pabcd26-421"></div><span><%=ii+1%>:00</span></div></div><%}%><div class="pabcd26-7e0 pabcd26-f42"><div class="pabcd26-e1c"></div></div></div>',subs:[]},init:function(e){this.$range=e.range},render:function(){var e=this;e.updater.digest(),e.$hours=c("#"+e.id+" .pabcd26-7e0"),e.$range&&e.val(e.$range)},showRange:function(){this.$hours.each(function(e,a){a=c(a);var d=a.find(".pabcd26-cd3"),i=a.find(".pabcd26-end");a.hasClass("pabcd26-dfe")?(d[a.prev().hasClass("pabcd26-dfe")?"hide":"show"](),i[a.next().hasClass("pabcd26-dfe")?"hide":"show"]()):(d.hide(),i.hide())})},val:function(e){var a=this,d=a.$hours;return e||""===e?(d.each(function(a,d){d=c(d),"1"==e.charAt(a)?d.addClass("pabcd26-dfe"):d.removeClass("pabcd26-dfe")}),a.showRange()):(e=[],d.each(function(a,d){d=c(d),a<24&&e.push(d.hasClass("pabcd26-dfe")?1:0)}),e=e.join("")),e},"start<mousedown>":function(e){var a=this,d=c(e.eventTarget),i=d.hasClass("pabcd26-dfe");d.toggleClass("pabcd26-dfe"),a.showRange(),c("#"+a.id).trigger({type:"change",range:a.val()}),a.$active=i,a.$drag=!0,t.begin(e.target,function(){t.clear()},function(){delete a.$drag})},"over<mouseover>":function(e){var a=this;if(a.$drag){if(!i.inside(e.relatedTarget,e.eventTarget)){c(e.eventTarget)[a.$active?"removeClass":"addClass"]("pabcd26-dfe"),a.showRange(),c("#"+a.id).trigger({type:"change",range:a.val()})}}}},{improve:function(e){e||(e="");for(var a=0;a<24;)e.charAt(a)||(e+="0"),a++;return e}})});