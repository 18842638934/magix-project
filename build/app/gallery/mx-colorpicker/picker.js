define("app/gallery/mx-colorpicker/picker",["magix","$","../mx-monitor/index"],function(o,e,i){var t=o("magix"),n=o("$"),r=o("../mx-monitor/index");i.exports=t.View.extend({init:function(o){var e=this;e.$color=o.color,e.$placement=o.placement,e.$align=o.align,r.setup();var i=n("#"+e.id),t=function(){e.show()};e.on("destroy",function(){r.teardown(),n("#cpcnt_"+e.id).remove(),i.off("click",t)}),i.on("click",t),e.$ownerNode=i},inside:function(o){var e=this;return t.inside(o,e.id)||t.inside(o,"cpcnt_"+e.id)},render:function(){var o=this,e="cpcnt_"+o.id;o.$color=o.$color||o.$ownerNode.val(),n(o.wrapEvent('<div style="position:absolute;display:none;z-index:10" mx-pick="pickColor()"></div>')).attr("id",e).insertAfter(o.$ownerNode)},show:function(){var o=this;if(!o.$shown){var e=n("#cpcnt_"+o.id),i=o.$ownerNode;o.$shown=!0,o.$rendered||(o.$rendered=!0,o.owner.mountVframe("cpcnt_"+o.id,"app/gallery/mx-colorpicker/index",{color:o.$color})),r.add(o),e.show();var t=i.offset(),c=void 0,d=void 0;switch(o.$placement){case"top":d=t.top-e.outerHeight()-5;break;default:d=t.top+i.outerHeight()+5}switch(o.$align){case"right":c=t.left+i.outerWidth()-e.outerWidth();break;default:c=t.left}e.offset({left:c,top:d})}},hide:function(){var o=this;if(o.$shown){var e=n("#cpcnt_"+o.id);o.$shown=!1,e.hide(),r.remove(o)}},"pickColor<pick>":function(o){var e=this;o.stopPropagation(),e.$ownerNode.val(o.color).trigger({type:"change",color:o.color}),e.hide()}})});