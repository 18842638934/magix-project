define("app/gallery/mx-calendar/datepicker",["magix","$","../mx-monitor/index"],function(e,t,i){var n=e("magix"),o=e("$"),a=n.Vframe,r=e("../mx-monitor/index");i.exports=n.View.extend({init:function(e){var t=this;t.$extra=e,r.setup();var i=o("#"+t.id),n=function(){t.show()};t.on("destroy",function(){r.teardown(),o("#dpcnt_"+t.id).remove(),i.off("click",n)}),i.on("click",n),t.$ownerNode=i},inside:function(e){var t=this;return n.inside(e,t.id)||n.inside(e,"dpcnt_"+t.id)},update:function(e){var t=this;a.get("dpcnt_"+t.id).invoke("update",[e])},render:function(){var e=this,t="dpcnt_"+e.id;o(e.wrapEvent('<div style="position:absolute;display:none;z-index:10" mx-change="pickDate()"></div>')).attr("id",t).insertAfter(e.$ownerNode),e.owner.mountVframe(t,"app/gallery/mx-calendar/index"),e.$extra.selected||(e.$extra.selected=e.$ownerNode.val()),e.update(e.$extra)},show:function(){var e=this;if(!e.$shown){var t=o("#dpcnt_"+e.id),i=e.$ownerNode;e.$shown=!0,r.add(e),t.show();var n=i.offset(),a=void 0,d=void 0;switch(e.$extra.placement){case"top":d=n.top-t.outerHeight()-5;break;default:d=n.top+i.outerHeight()+5}switch(e.$extra.align){case"right":a=n.left+i.outerWidth()-t.outerWidth();break;default:a=n.left}t.offset({left:a,top:d})}},hide:function(){var e=this;if(e.$shown){var t=o("#dpcnt_"+e.id);t.prop("vframe").invoke("toDaysPannel"),e.$shown=!1,t.hide(),r.remove(e)}},"pickDate<change>":function(e){var t=this;e.stopPropagation(),t.$ownerNode.val(e.date).trigger({type:"change",date:e.date}),t.hide()}})});