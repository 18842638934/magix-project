define("app/gallery/mx-range/index",["magix","$","../mx-dragdrop/index"],function(e,t,a){var i=e("magix"),r=e("$");i.applyStyle("p67",".p67-58b{height:32px;cursor:default}.p67-b70{width:340px;height:2px;background:#c7c7c7;position:relative;display:inline-block;border-radius:3px}.p67-75e{border-radius:6px;width:12px;height:12px;position:absolute;top:-5px;background:#f4f4f4;border:1px solid #878787}.p67-dfe{background:#ddd}");var d=e("../mx-dragdrop/index"),o=function(e){return e>1?e=1:e<0&&(e=0),e};a.exports=i.View.extend({tmpl:{html:'<div class="p67-b70"><div mx-guid="g0" class="p67-75e" mx-mousedown="drag()" style="left:<%=$$.value%>px"></div></div>',subs:[{keys:["value"],path:'div[mx-guid="g0"]',attr:'style="left:<%=$$.value%>px"',attrs:[{n:"style"}]}]},init:function(e){var t=this;t.$value=e.value||0,t.$oNode=r("#"+t.id);var a=function(e){var a=t.$oNode.offset(),i=t.vars(),r=e.pageX-a.left,d=(r-i.half)/i.max;d=o(d),t.val(d),t.trigger(d)};t.$oNode.on("click",a),t.on("destroy",function(){t.$oNode.off("click",a)})},render:function(){var e=this;e.updater.digest(),e.val(e.$value),e.$oNode.addClass("p67-58b")},vars:function(){var e=this,t=e.$oNode.find(".p67-b70"),a=e.$oNode.find(".p67-75e"),i=a.outerWidth()/2;return{tracker:t,indicator:a,max:t.width()-2*i,half:i}},val:function(e){var t=this;if(e||0===e){e=o(e);var a=t.vars(),i=e*a.max;a.indicator.css({left:i}),t.$value=e}return t.$value},trigger:function(e){this.$oNode.val(e).trigger({type:"change",value:e})},"drag<mousedown>":function(e){e.stopPropagation();var t,a=r(e.eventTarget),i=a.outerWidth(),o=a.parent().width(),n=o-i,s=parseInt(a.css("left"),10),l=this;a.addClass("p67-dfe"),d.begin(e.eventTarget,function(i){d.clear();var r=s+i.pageX-e.pageX;r<0?r=0:r>n&&(r=n);var o=r/n;o!=t&&(t=o,a.css({left:r}),l.trigger(o))},function(){a.removeClass("p67-dfe")})}})});