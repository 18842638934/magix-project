define("app/gallery/mx-dialog/index",["magix","$"],function(i,t,e){var o=i("magix");o.applyStyle("pc8",".pc8-e16{position:absolute;top:0;left:0;z-index:1040}.pc8-40d{position:relative;width:auto;background-color:#fff;border-radius:6px;border:1px solid #e6e6e6;box-shadow:none}.pc8-663{position:absolute;-webkit-appearance:none;-moz-appearance:none;padding:0;margin:13px 15px 0 0;cursor:pointer;background:transparent;border:0;float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2;z-index:1041;top:16px;right:10px;margin:0}.pc8-663:focus,.pc8-663:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}.pc8-f9f{font-size:22px;font-weight:400}.pc8-1c1{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;filter:alpha(opacity=50);opacity:.5;display:none;z-index:1039}.pc8-797{filter:blur(3px)}.pc8-429{animation:pc8-9b9 .3s;animation-fill-mode:forwards}.pc8-882{position:absolute;right:10px;top:0;width:1px;height:0}.pc8-4b9{padding:80px 0}@keyframes pc8-9b9{0%{opacity:0}to{opacity:.5}}.pc8-6a7{animation:pc8-7a1 .2s;animation-fill-mode:forwards}@keyframes pc8-7a1{0%{opacity:.5}to{opacity:0}}.pc8-5c8{margin-bottom:50px;min-height:60px}.pc8-0fa{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.pc8-37c{animation:pc8-dc0 .3s;animation-fill-mode:forwards}@keyframes pc8-dc0{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.pc8-289{animation:pc8-8b8 .2s;animation-fill-mode:forwards}@keyframes pc8-8b8{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");var a=i("$"),p=500,d=[],n=function(i){for(var t=d.length-1,e=void 0;t>=0;t--)if(e=d[t],e.id==i.id){d.splice(t,1);break}};e.exports=o.View.extend({tmpl:{html:'<div mx-guid="g1" class="pc8-1c1 pc8-429" style="display: block;z-index:<%=$$.zIndex-1%>" id="mask_<%=$$.viewId%>"></div><div mx-guid="g7" class="pc8-0fa" style="z-index:<%=$$.zIndex%>"><div mx-guid="g6" class="pc8-e16 pc8-37c" data-spm-protocol="i" id="body_<%=$$.viewId%>" style="left:<%=$$.left%>px;top:<%=$$.top%>px;width:<%=$$.width%>px"><input mx-guid="g3" id="focus_<%=$$.viewId%>" class="pc8-882"/><button mx-guid="g4" type="button" mx-click="close()" class="pc8-663 <%=$$.closable ? \'\' : \'p16-ab9\'%>"><span class="pce-334 pc8-f9f">&#xe67f;</span></button><div mx-guid="g5" class="pc8-40d pc8-5c8" id="cnt_<%=$$.viewId%>"><div class="p28-f0b pc8-4b9"><span></span></div></div></div></div>',subs:[{keys:["zIndex","viewId"],path:'div[mx-guid="g1"]',attr:'style="display: block;z-index:<%=$$.zIndex-1%>" id="mask_<%=$$.viewId%>"',attrs:[{n:"style"},{n:"id",p:1}]},{keys:["closable"],path:'button[mx-guid="g4"]',attr:"class=\"pc8-663 <%=$$.closable ? '' : 'p16-ab9'%>\"",attrs:[{n:"class",p:1,f:"className"}]},{keys:["viewId"],path:'div[mx-guid="g5"]',attr:'id="cnt_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{keys:["viewId"],path:'input[mx-guid="g3"]',attr:'id="focus_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{keys:["viewId","left","top","width"],path:'div[mx-guid="g6"]',attr:'id="body_<%=$$.viewId%>" style="left:<%=$$.left%>px;top:<%=$$.top%>px;width:<%=$$.width%>px"',attrs:[{n:"id",p:1},{n:"style"}]},{keys:["zIndex"],path:'div[mx-guid="g7"]',attr:'style="z-index:<%=$$.zIndex%>"',attrs:[{n:"style"}]}]},init:function(i){var t=this,e=a("#app");t.on("destroy",function(){n(t),p-=2,500==p&&e.removeClass("pc8-797"),a("#"+t.id).trigger("close").remove()}),o.has(i,"closable")||(i.closable=!0),t.updater.set(i),500==p&&e.addClass("pc8-797"),p+=2,d.push(t)},render:function(){var i=this,t=i.updater,e=t.get();t.set({zIndex:p,viewId:i.id}).digest(),a("#"+i.id).show(),a("#focus_"+i.id).focus(),i.owner.mountVframe("cnt_"+i.id,e.view,e),setTimeout(i.wrapAsync(function(){a("#body_"+i.id).removeClass("pc8-37c"),a("#mask_"+i.id).removeClass("pc8-429")}),300)},fireLeave:function(i){o.Vframe.get("cnt_"+this.id).invoke("fire",["unload",i])},"close<click>":function(){a("#"+this.id).trigger("dlg_close")},"$doc<keyup>":function(i){if(27==i.keyCode){var t=d[d.length-1];if(t==this&&t.updater.get("closable")){a("#"+t.id).trigger("dlg_close")}}}},{show:function(i,t){var e=o.guid("dlg_");a(document.body).append('<div id="'+e+'" style="display:none" />');var p,d=i.owner.mountVframe(e,"app/gallery/mx-dialog/index",t),n=a("#"+e);return n.on("dlg_close",function(){if(!n.data("closing")&&!p){var t=function(){n.data("closing",1),a("#body_"+e).addClass("pc8-289"),a("#mask_"+e).addClass("pc8-6a7"),setTimeout(function(){i.owner.unmountVframe(e)},200)},o={prevent:function(){p=1},resolve:function(){o.p=1,p=0,t()},reject:function(){o.p=1,p=0}};d.invoke("fireLeave",o),p||o.p||t()}})}})});